<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkillForge 2026 | Identity Portal</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0f172a;
            --brand: #2563eb;
            --brand-light: #eff6ff;
            --accent: #f59e0b;
            --bg: #f8fafc;
            --glass: rgba(255, 255, 255, 0.9);
        }

        * { box-sizing: border-box; }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg);
            background-image: 
                radial-gradient(at 0% 0%, rgba(37, 99, 235, 0.05) 0px, transparent 50%),
                radial-gradient(at 100% 100%, rgba(245, 158, 11, 0.05) 0px, transparent 50%);
            color: var(--primary);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .main-card {
            width: 100%;
            max-width: 550px;
            background: var(--glass);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            border-radius: 24px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            position: relative;
        }

        .top-bar { background: var(--primary); height: 6px; width: 100%; }
        .content { padding: 40px; }

        .header { text-align: center; margin-bottom: 35px; }
        .header h1 { font-size: 26px; font-weight: 800; letter-spacing: -1px; margin: 0; color: var(--primary); }
        .header p { font-size: 14px; color: #64748b; margin-top: 8px; font-weight: 500; }

        .section-label {
            font-size: 11px; font-weight: 800; text-transform: uppercase;
            letter-spacing: 1.5px; color: var(--brand); margin-bottom: 20px;
            display: flex; align-items: center; gap: 10px;
        }
        .section-label::after { content: ""; height: 1px; background: #e2e8f0; flex: 1; }

        .form-grid { display: grid; gap: 20px; }
        .input-group { position: relative; }
        label { display: block; font-size: 12px; font-weight: 700; margin-bottom: 8px; color: #475569; }

        input, select, textarea {
            width: 100%; padding: 14px 16px; background: #ffffff;
            border: 1.5px solid #e2e8f0; border-radius: 12px;
            font-size: 14px; font-family: inherit; color: var(--primary);
            transition: all 0.2s ease;
        }

        input:focus, select:focus, textarea:focus {
            outline: none; border-color: var(--brand);
            box-shadow: 0 0 0 4px var(--brand-light); background: #fff;
        }

        .preview-box {
            background: #0f172a; border-radius: 16px; padding: 20px;
            margin-top: 30px; color: #94a3b8; font-family: 'JetBrains Mono', monospace;
            font-size: 11px; border: 1px solid #1e293b;
        }
        .preview-header { color: #38bdf8; margin-bottom: 10px; display: block; }
        .preview-line { margin-bottom: 4px; display: block; }
        .preview-line b { color: #f8fafc; }

        .submit-btn {
            width: 100%; background: var(--brand); color: white; padding: 16px;
            border: none; border-radius: 14px; font-size: 15px; font-weight: 700;
            cursor: pointer; margin-top: 25px; transition: transform 0.2s, background 0.2s;
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        .submit-btn:hover { background: #1d4ed8; transform: translateY(-1px); }
        .submit-btn:disabled { background: #cbd5e1; cursor: not-allowed; }

        .status-overlay {
            text-align: center; padding: 60px 20px; animation: fadeIn 0.4s ease forwards;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .icon-circle {
            width: 80px; height: 80px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 40px; margin: 0 auto 20px;
        }
        .success-circle { background: #dcfce7; color: #166534; }
        .locked-circle { background: #fee2e2; color: #991b1b; }

        .footer-note { text-align: center; font-size: 11px; color: #94a3b8; margin-top: 20px; }
    </style>
</head>
<body>

<div class="main-card" id="mainCard">
    <div class="top-bar"></div>
    <div class="content" id="formContent">
        <div class="header">
            <h1>Identity Registry</h1>
            <p>Master Data Correction Protocol v5.5</p>
        </div>

        <form id="correctionForm">
            <input type="hidden" name="access_key" value="717169f6-a1b6-4d49-a50f-ed24a6e7d2f3">
            <input type="hidden" name="subject" value="LOG: SkillForge Registry Correction">
            
            <div class="section-label">01. Identity Verification</div>
            <div class="form-grid">
                <div class="input-group">
                    <label>Digital ID (SFID)</label>
                    <input type="text" name="sfid" id="sfidInput" placeholder="SF26-XXX-000" required oninput="updatePreview()">
                </div>
                <div class="input-group">
                    <label>Full Name as Registered</label>
                    <input type="text" name="registered_name" id="nameInput" placeholder="Enter name for lookup" required oninput="updatePreview()">
                </div>
            </div>

            <div style="margin-top: 35px;" class="section-label">02. Requested Changes</div>
            <div class="form-grid">
                <div class="input-group">
                    <label>Correction Target</label>
                    <select name="correction_target" required>
                        <option value="name">Spelling Error in Name</option>
                        <option value="track">Incorrect Skill Track</option>
                        <option value="both">Multiple Discrepancies</option>
                        <option value="missing">Missing from Registry</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>New Proposed Track</label>
                    <select name="proposed_track">
                        <option value="No Change">Maintain Current Track</option>
                        <option value="WDD">Web Dev & Design (WDD)</option>
                        <option value="GRD">Graphic Systems (GRD)</option>
                        <option value="FXS">Forex Synthetic (FXS)</option>
                        <option value="STK">Stock Trading (STK)</option>
                        <option value="CYB">Cybersecurity (CYB)</option>
                        <option value="FXC">Forex Currency (FXC)</option>
                        <option value="DDC">Discord Design and Development (DDC)</option>
                        <option value="PHO">Photography (PHO)</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Technical Details / Comments</label>
                    <textarea name="remarks" rows="2" placeholder="Specify the exact misspelling or issue..."></textarea>
                </div>
            </div>

            <div class="preview-box">
                <span class="preview-header">// LOG PREVIEW</span>
                <span class="preview-line">ID_NODE: <b id="pv-id">Waiting...</b></span>
                <span class="preview-line">USER_REF: <b id="pv-name">Ready</b></span>
                <span class="preview-line">PRIORITY: <b>Level_02</b></span>
                <span class="preview-line">TS: <b id="pv-time">--:--</b></span>
            </div>

            <button type="submit" class="submit-btn" id="submitBtn">
                Validate & Synchronize
            </button>
        </form>
    </div>
</div>

<script>
    const STORAGE_KEY = 'sf_correction_submitted';

    // Check if user has already submitted
    window.onload = function() {
        if (localStorage.getItem(STORAGE_KEY)) {
            showLockedScreen();
        }
        updatePreview();
    };

    function showLockedScreen() {
        document.getElementById('formContent').innerHTML = `
            <div class="status-overlay">
                <div class="icon-circle locked-circle">ðŸ”’</div>
                <h2 style="font-weight: 800; margin: 0;">Session Locked</h2>
                <p style="color: #64748b; font-size: 14px; padding: 0 20px; margin-top: 15px; line-height: 1.6;">
                    A correction request from this device is already being processed. 
                    To ensure data integrity, multiple submissions are prohibited.
                </p>
                <div style="margin-top: 30px; font-size: 11px; color: #94a3b8; font-family: 'JetBrains Mono';">
                    REF_CODE: ${localStorage.getItem(STORAGE_KEY)}
                </div>
            </div>
        `;
    }

    function updatePreview() {
        const sfid = document.getElementById('sfidInput')?.value || 'Waiting...';
        const name = document.getElementById('nameInput')?.value || 'Ready';
        const now = new Date();
        const time = now.getHours().toString().padStart(2, '0') + ":" + now.getMinutes().toString().padStart(2, '0');
        
        const idElem = document.getElementById('pv-id');
        const nameElem = document.getElementById('pv-name');
        const timeElem = document.getElementById('pv-time');

        if(idElem) idElem.innerText = sfid;
        if(nameElem) nameElem.innerText = name.toUpperCase();
        if(timeElem) timeElem.innerText = time;
    }

    const form = document.getElementById('correctionForm');
    const btn = document.getElementById('submitBtn');

    if (form) {
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            btn.disabled = true;
            btn.innerText = "Synchronizing Registry...";

            const formData = new FormData(form);
            const object = Object.fromEntries(formData);
            const refCode = "SF-LOG-" + Math.random().toString(36).substring(2, 8).toUpperCase();
            
            object.system_log = "SkillForge Identity Update Triggered. REF: " + refCode;

            fetch('https://api.web3forms.com/submit', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
                body: JSON.stringify(object)
            })
            .then(async (response) => {
                if (response.status == 200) {
                    localStorage.setItem(STORAGE_KEY, refCode);
                    
                    document.getElementById('formContent').innerHTML = `
                        <div class="status-overlay">
                            <div class="icon-circle success-circle">âœ“</div>
                            <h2 style="font-weight: 800; margin: 0;">Protocol Complete</h2>
                            <p style="color: #64748b; font-size: 14px; padding: 0 40px; margin-top: 15px; line-height: 1.6;">
                                The correction has been logged. Your metadata will be updated within 48 hours. 
                                <strong>Duplicate submissions are now locked for this session.</strong>
                            </p>
                            <div style="margin-top: 25px; font-size: 11px; color: #94a3b8; font-family: 'JetBrains Mono';">
                                RECEIPT: ${refCode}
                            </div>
                        </div>
                    `;
                } else {
                    btn.disabled = false;
                    btn.innerText = "Error: Retrying...";
                }
            });
        });
    }
</script>

</body>
</html>

